sudo: required
language: node_js
node_js:
- 8
services:
- docker
cache:
  directories:
  - node_modules
script:
- npm test
after_success:
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "dev" ]]; then
  docker build -t cangr/mvs-explorer-api:dev .; docker push cangr/mvs-explorer-api:dev;
  fi
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  docker build -t cangr/mvs-explorer-api:latest .; docker push cangr/mvs-explorer-api:latest;
  fi
env:
  global:
  - secure: IxEZwqHmKgR3XxuwDz+d92TAZOoTBHTuduIO+cI11f+AU9ierEmAtduITTcO8dkNhyja7ddb+z2M7Nrv4Rz51Qp1f9miKHxaMsmEFAvXS5fRj1K26XO1nvXad5iwAJV61zZUTGRpDHxb1wrMc29drhCbWt809LZvw5UF+U9XPgNeQ0rqd4BCgMS7R4FD2DUGg74C04GEWG88umM7yFQyOsknYbReDqFKMJEJqrmpR5/Hm0LRkGn1y5yrryDDgmAKyI2ogusj+d3mTtNdcevHhQkl9ZRksW3t8M1cR/h79JxdtX9repsVP5GTrykOmHpEeTc4gc/BNWJK+vOL0JQrq+Z/zLQ6/fxOarC9XktiglQODd04j0FwHvz6MPSKHqd15h+mPCWNXUjpuOpihm2z1vksEpkKNJBK3Q54NWgoIz3LIl9KrUutn+65cBHWIX5T2/ApPKD4n7KldveYRSTwInhOALNWNXnqvgeS+7h2A6vlqt36d3ujl2aYSFxycL20rpeDm+xYIazi1twKCVclhTlQD48JU6aIJQ+ZilQRBG8UGV11rukHP6oGdSfo/POHWFLG5+fmR3nHZ+uLhiJORx3uamIhD4H+vaPhKPJJCeUcG38GtncoblIy37miazDpJepb7BLcJHw2R7h11d5asE9qYM8rBJsy/AouUwft964=
  - secure: eJA6w4zdN608z6zwR79r2W0u3BeSif+vReR1WzwxVofcf6+d7v6MITK9PaucoEpR8n+kwnMdjKEz1llISZ+z3uoAvUE0P3LtVAVZTnkA1ZAYVd13VwRe9T2g2Iy/4GtU0pCgXTVa6jdkPDk/PCsU+KraZSF/RiE2BWYiHISnGeFms8BLYaVbMmN4+DDeVjQkYXzor0WV/+TEdryxWLbWOUX8PpWmvn8MwD/NKcFy/njy2e1SfAT80rldqIbQVY5QXKzIzuw9Ycfp69ZY/vyuUnut8XW+HZA1+PLIDyPpqXyDqWa3A9IKaUTQey1tYdOW3U4gniUbCOe1gwlR0/HFHzvbkf9PU1wfiNeXuqGBHpDBeQytmaKK/4k4D5v2WEZ9ShKmV487o/0jboEpxd9DstM1/YqAI85twelgAuvhmQJwHHzLXp1TXwbUjac2ECWaIOF2iLmXknFyrv1h8igRAHI/elWEcabpDsUI9yFXVlokEkXTxtUm6ZKgPwgHAlubOXLnt5qVhAH2ULPXFpKopegH46j1mbrceeyhRhR3Ff17L2LmRs8uQtdvxE/ArpmgbnTxtm7a36VYy1Y7T9OSKxj6g0KN6aAuvHKtEUknYSqLTcubN2RQRuynBry25f5/dbxXDH7UrFpRRguSubma0INn79+We4pg7NbviZvZd+Q=
notifications:
  pushover:
    api_key:
      secure: JC3aejPBM7YW9qFcUvveGQuQeoMfZE52e2Kqxme5JM7bP0K7nZJD+8BWOAoSoeCkks5/xLo8MJYOzHdt189ZYoCtOz27LLYzVX5t4HUxe6mZm+nGR/ZFHFRzuiXbw724/p2olWVT3Mouvb8vPiaUdOyvFR7Q94vNbqAUIFWEi44ySi/KIKXrkvnPPHtvWOIuLcmYcf95FpgJ+eU/vOAqo2Cs+0H+49DtwR1B97Rur0w3/kTPJy0kvn/zbGQ/L5qG7RNwXJe4sLRbbYuVYyXMKCo7aCExL8GpFleLb//1yFQl9hzFvE2+GwuQS7pBk09LHuBwql5YhFAff6UZZyDnLgF8C8CQ6/W5Zn3Ddg4pRwHFBeZXIgO29Yw70/n0whHtRR2nUfdbLSL8wEUkx8j9sYNDQBFjSNoq7AiNj3yZFsX4A9Jp13/3WTM1nNM+orhrR6yVG6BMxUDgO0VZxGK1PsnOv3kk9Si67zVEuHonXgeiV7eNkS5l52Kv29LH42W4773LtamcZPCm24/nzcfAM3EZxGR93O3NGC/XoYBupvr3QJ3DE12io0h8eK+akdx2aVp1Z0fh4nSjLAuhBAm4OtGm/+RTVEFZrXVmBNQVu8ndFg/yYYKvjnTEdB68E/BtklPu+0rV8PbzaImkIiWIBwcGUsa30RYCCdkQJ4jwoTA=
    users:
      secure: G3Z9i5K6xPAGlntRn6xlCtTGDl1Nt5WOt9MRbIgpczu7BtHJnsOWAVRbPJQgJZvxmsFVL24c03vfKg9jiTcz3De41yKCCFzVtZXjweOVgNUzwdfbOVsb9p8U21oea8QWsoDskdYcG9QiRq48GsW/kb7E83G5BROsUiGcPxTwAohhAqgy8dj0Ke93vBjJK/a8iJJ3if/yC8SNxClsm5kmWhUnPF8TqUR6ybaEEy76AWbzJetdzX4yNkctMOVKrl8Db6rsAc82kWVKnQ77bDOOQdGeNmiZMKyQVyr58pQWAXvxx2Y2KE3AFVHm8F8pjKiExLBDaikxExwYI6seEGIgZqQo0FvuNh35KNS4dL9mfhRBiETrW95MoIm8uyVAHEpWP8HOg/XX1xVUDQehndj5uKmS1UVkJ15q74kth3oKflS8yVfyNe/Q0mCc0Qcq4F2XnBYICAO3wcOws2QfXXs0TS8oeJox8xXVZJHhNYCWao1jlNXQh2L1/BseufZCsPvUIJQRY2iePAKhaWX4brzZBHSmioGuhODIJDRHOELZYowcsk3HXuFOhSOhtHqyVrYf/me0FBir+ezlRyeKyrbJhGRM8SaB6emVOd8cH6pER5tz8oWQr5+bkp4gwFhSUg4S/fxIxF6cB78bnVgrUGJ1X5C8Yyvocac7dE59D2IpDVQ=
